{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\LearnHub-Course-Subscription-App\\\\frontend\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport api from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const storedToken = localStorage.getItem('token');\n    const storedUser = localStorage.getItem('user');\n    if (storedToken && storedUser) {\n      setToken(storedToken);\n      try {\n        setUser(JSON.parse(storedUser));\n      } catch (_) {/* ignore corrupt */}\n    }\n    setLoading(false);\n  }, []);\n  const signup = useCallback(async (name, email, password) => {\n    const res = await api.post('/auth/signup', {\n      name,\n      email,\n      password\n    });\n    const {\n      token: tk,\n      user: usr\n    } = res.data;\n    localStorage.setItem('token', tk);\n    localStorage.setItem('user', JSON.stringify(usr));\n    setToken(tk);\n    setUser(usr);\n    return res.data;\n  }, []);\n  const login = useCallback(async (email, password) => {\n    const res = await api.post('/auth/login', {\n      email,\n      password\n    });\n    const {\n      token: tk,\n      user: usr\n    } = res.data;\n    localStorage.setItem('token', tk);\n    localStorage.setItem('user', JSON.stringify(usr));\n    setToken(tk);\n    setUser(usr);\n    return res.data;\n  }, []);\n  const logout = useCallback(() => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setToken(null);\n    setUser(null);\n  }, []);\n  const isAuthenticated = !!user && !!token;\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      token,\n      loading,\n      isAuthenticated,\n      signup,\n      login,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthProvider, \"BijyJ0b1eslDKw4/4W2Hn2ZibEw=\");\n_c = AuthProvider;\nexport function useAuth() {\n  _s2();\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error('useAuth must be used inside <AuthProvider>');\n  return ctx;\n}\n_s2(useAuth, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","api","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","token","setToken","loading","setLoading","storedToken","localStorage","getItem","storedUser","JSON","parse","_","signup","name","email","password","res","post","tk","usr","data","setItem","stringify","login","logout","removeItem","isAuthenticated","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","ctx","Error","$RefreshReg$"],"sources":["C:/Users/ASUS/Downloads/LearnHub-Course-Subscription-App/frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport api from '../utils/api';\n\nconst AuthContext = createContext(null);\n\nexport function AuthProvider({ children }) {\n  const [user, setUser]       = useState(null);\n  const [token, setToken]     = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  \n  useEffect(() => {\n    const storedToken = localStorage.getItem('token');\n    const storedUser  = localStorage.getItem('user');\n    if (storedToken && storedUser) {\n      setToken(storedToken);\n      try { setUser(JSON.parse(storedUser)); }\n      catch (_) { /* ignore corrupt */ }\n    }\n    setLoading(false);\n  }, []);\n\n  \n  const signup = useCallback(async (name, email, password) => {\n    const res = await api.post('/auth/signup', { name, email, password });\n    const { token: tk, user: usr } = res.data;\n    localStorage.setItem('token', tk);\n    localStorage.setItem('user', JSON.stringify(usr));\n    setToken(tk);\n    setUser(usr);\n    return res.data;\n  }, []);\n\n  \n  const login = useCallback(async (email, password) => {\n    const res = await api.post('/auth/login', { email, password });\n    const { token: tk, user: usr } = res.data;\n    localStorage.setItem('token', tk);\n    localStorage.setItem('user', JSON.stringify(usr));\n    setToken(tk);\n    setUser(usr);\n    return res.data;\n  }, []);\n\n  \n  const logout = useCallback(() => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setToken(null);\n    setUser(null);\n  }, []);\n\n  const isAuthenticated = !!user && !!token;\n\n  return (\n    <AuthContext.Provider value={{ user, token, loading, isAuthenticated, signup, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error('useAuth must be used inside <AuthProvider>');\n  return ctx;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}